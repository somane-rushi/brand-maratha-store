import{a as o,j as s}from"./index-f6D6TMGS.js";import{C}from"./CFormControlWrapper-aXjT4m4y.js";const S=({label:f,name:i,placeholder:y,options:m,values:r=[],setFieldValue:b,error:a,touched:g})=>{const[j,d]=o.useState(!1),[h,c]=o.useState(""),w=o.useRef(null),x=o.useRef(null),u=e=>{const n=r.includes(e)?r.filter(l=>l!==e):[...r,e];b(i,n)},p=Array.isArray(m)?m.filter(e=>(e.name||e.title||"").toLowerCase().includes(h.toLowerCase())):[];return o.useEffect(()=>{const e=t=>{x.current&&!x.current.contains(t.target)&&(d(!1),c(""))};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),s.jsxs("div",{className:"mb-3 position-relative",ref:x,children:[s.jsxs(C,{htmlFor:i,className:"fw-semibold",children:[f.toUpperCase()," ",i==="catalogue_ids"&&s.jsx("span",{className:"text-danger",children:"*"})]}),s.jsxs("div",{className:"form-control position-relative",onClick:()=>d(e=>!e),style:{cursor:"pointer",minHeight:"30px",display:"flex",flexWrap:"wrap",alignItems:"center",gap:"4px",overflow:"hidden"},children:[r.length===0&&s.jsx("span",{className:"text-muted",style:{opacity:.6},children:y||`${f}...`}),Array.isArray(r)&&r.map((e,t)=>{const n=m.find(N=>N.id===e),l=(n==null?void 0:n.name)||(n==null?void 0:n.title)||e;return s.jsxs("span",{className:"badge bg-primary d-flex align-items-center",style:{marginBottom:"4px",marginRight:"4px"},children:[l,s.jsx("button",{type:"button",className:"btn-close btn-close-white ms-2",onClick:N=>{N.stopPropagation(),u(e)},style:{fontSize:"0.6rem"}})]},t)}),s.jsx("input",{type:"text",readOnly:!0,style:{border:"none",outline:"none",boxShadow:"none",flex:"1 0 60px",minWidth:"60px",height:"20px",padding:0,marginBottom:"4px",backgroundColor:"transparent",cursor:"pointer"}})]}),j&&s.jsxs("div",{ref:w,className:"position-absolute bg-white border mt-1 w-100 shadow-sm rounded",style:{zIndex:1e3,maxHeight:"250px",overflowY:"auto"},children:[s.jsx("div",{className:"p-2 border-bottom sticky-top bg-white",children:s.jsx("input",{type:"text",value:h,onChange:e=>c(e.target.value),placeholder:"Search...",className:"form-control form-control-sm"})}),p.length>0?p.map(e=>{const t=(e==null?void 0:e.name)||(e==null?void 0:e.title)||"-",n=`${i}-${e.id}`;return s.jsxs("div",{className:"d-flex align-items-center px-3 py-2 border-bottom",children:[s.jsx("input",{className:"form-check-input",type:"checkbox",id:n,value:e.id,checked:r.includes(e.id),onChange:()=>u(e.id)}),s.jsx("label",{className:"form-check-label ms-2",htmlFor:n,children:t})]},e.id)}):s.jsx("div",{className:"px-3 py-2 text-muted",children:"No matching options"})]}),a&&g&&s.jsx("div",{className:"text-danger small mt-1",children:a})]})},L=({label:f,name:i,placeholder:y,options:m=[],values:r=[],setFieldValue:b})=>{const[a,g]=o.useState(""),[j,d]=o.useState(!1),h=o.useRef(null),c=Array.isArray(r)?r:[],w=t=>{const n=t.split(",").map(l=>l.trim()).filter(l=>l&&!c.includes(l));n.length>0&&b(i,[...c,...n]),g(""),d(!1)},x=t=>{b(i,c.filter(n=>n!==t))},u=t=>{h.current&&!h.current.contains(t.target)&&d(!1)};o.useEffect(()=>(document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)),[]);const p=m.filter(t=>t.name.toLowerCase().includes(a.toLowerCase())&&!c.includes(t.name)),e=a.trim()!==""&&!m.some(t=>t.name.toLowerCase()===a.toLowerCase())&&!c.includes(a.trim());return s.jsxs("div",{className:"mb-3 position-relative",ref:h,children:[s.jsx("label",{className:"form-label fw-semibold",children:f.toLocaleUpperCase()}),s.jsxs("div",{className:"form-control d-flex flex-wrap align-items-center",style:{minHeight:"42px",cursor:"text"},onClick:()=>d(!0),children:[c.map((t,n)=>s.jsxs("span",{className:"badge bg-primary me-1 mb-1 d-flex align-items-center",children:[t,s.jsx("button",{type:"button",className:"btn-close btn-close-white ms-2",style:{fontSize:"0.6rem"},onClick:l=>{l.stopPropagation(),x(t)}})]},n)),s.jsx("input",{type:"text",value:a,placeholder:y,onChange:t=>{g(t.target.value),d(!0)},style:{flex:1,border:"none",outline:"none",minWidth:"80px"}})]}),j&&(p.length>0||e)&&s.jsxs("div",{className:"position-absolute bg-white border mt-1 w-100 shadow-sm rounded zindex-dropdown",style:{zIndex:1e3,maxHeight:"250px",overflowY:"auto"},children:[p.map(t=>s.jsxs("div",{className:"px-3 py-2 border-bottom d-flex align-items-center",children:[s.jsx("input",{type:"checkbox",className:"form-check-input",id:`check-${t.id}`,onChange:()=>w(t.name)}),s.jsx("label",{htmlFor:`check-${t.id}`,className:"form-check-label ms-2 mb-0",children:t.name})]},t.id)),e&&s.jsxs("div",{className:"px-3 py-2 d-flex align-items-center bg-light",children:[s.jsx("input",{type:"checkbox",className:"form-check-input",id:"custom-check",onChange:()=>w(a.trim())}),s.jsxs("label",{htmlFor:"custom-check",className:"form-check-label ms-2 mb-0",children:['"',a.trim(),'"']})]})]})]})};export{S as M,L as T};
