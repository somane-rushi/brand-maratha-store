import{a as o,_ as k,c as L,b as G,d as B,P as y,m as D,j as e}from"./index-f6D6TMGS.js";import{a as F,b as N}from"./index.esm-B7prAHhm.js";import{a as T,A as U}from"./axios.config-D8NC-S8h.js";import{C as v,a as S}from"./CRow-C5aZ3uce.js";import{C as _,a as q}from"./CCardBody-DyHbCEEC.js";import{C as A}from"./CForm-BElthXFv.js";import{C as b}from"./CInputGroup-UwF181Kr.js";import{C as E}from"./CInputGroupText-Bod6Fscq.js";import{c as z}from"./cil-user-Ddrdy7PS.js";import{C as I}from"./CFormInput-CzlD-ECf.js";import{c as H}from"./cil-lock-locked-DmxpJbVL.js";import{C as J}from"./CButton-ByJ5g7iZ.js";import"./CFormControlWrapper-aXjT4m4y.js";var f=o.forwardRef(function(t,s){var l=t.children,m=t.className,h=k(t,["children","className"]);return L.createElement("div",G({className:B("card-group",m)},h,{ref:s}),l)});f.propTypes={children:y.node,className:y.string};f.displayName="CCardGroup";const ae=()=>{const t=D(),[s,l]=o.useState({email:"",password:""}),[m,h]=o.useState(!1),[x,a]=o.useState(""),C=o.useRef(null),d=o.useRef(null),g=p=>{const{name:n,value:c}=p.target;l(i=>({...i,[n]:c}))},R=async p=>{var n,c,i,w,j;if(console.log("call"),p.preventDefault(),a(""),!s.email){a("Email is required"),(n=C.current)==null||n.focus();return}if(!s.password){a("Password is required"),(c=d.current)==null||c.focus();return}try{const r=await T.post("/auth/login",s),{data:u,status:P}=r||{};P===200&&(localStorage.setItem("token",u==null?void 0:u.token),window.dispatchEvent(new Event("tokenUpdated")),t("/",{replace:!0})),console.log(r)}catch(r){r instanceof U?a(((w=(i=r.response)==null?void 0:i.data)==null?void 0:w.error)||"Something went wrong!"):r instanceof Error?a(r.message||"Something went wrong!"):a("Something went wrong!"),(j=d.current)==null||j.focus()}};return e.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:e.jsx(F,{children:e.jsx(v,{className:"justify-content-center",children:e.jsx(S,{md:8,children:e.jsx(f,{children:e.jsx(_,{className:"p-4",children:e.jsx(q,{children:e.jsxs(A,{onSubmit:R,children:[e.jsx("h1",{children:"Login"}),e.jsx("p",{className:"text-body-secondary",children:"Sign In to your account"}),e.jsxs(b,{className:"mb-3",children:[e.jsx(E,{children:e.jsx(N,{icon:z})}),e.jsx(I,{ref:C,type:"text",placeholder:"Username",name:"email",autoComplete:"email",onChange:g,value:s.email})]}),e.jsxs(b,{className:"mb-4",children:[e.jsx(E,{children:e.jsx(N,{icon:H})}),e.jsx(I,{ref:d,placeholder:"Password",autoComplete:"current-password",type:m?"text":"password",name:"password",onChange:g,value:s.password})]}),x&&e.jsx("div",{style:{color:"red",marginBottom:"1rem"},children:x}),e.jsx(v,{children:e.jsx(S,{xs:6,children:e.jsx(J,{type:"submit",color:"primary",className:"px-4",children:"Login"})})})]})})})})})})})})};export{ae as default};
