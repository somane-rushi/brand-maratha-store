import{a as r,j as e,C as O}from"./index-f6D6TMGS.js";import{b as A,aT as H}from"./api.endpoints-D7eIfK11.js";import{a as E}from"./axios.config-D8NC-S8h.js";import{C as M}from"./CAlert-Ceafrkex.js";import{C as D,a as F}from"./CRow-C5aZ3uce.js";import{C as Q,a as U}from"./CCardBody-DyHbCEEC.js";import{C as $}from"./CCardHeader-BkEnHaV2.js";import{C as z}from"./CInputGroup-UwF181Kr.js";import{C as G}from"./CFormInput-CzlD-ECf.js";import{C as V}from"./CButton-ByJ5g7iZ.js";import{C as W,a as q,b as k,c,d as J,e as b}from"./CTable-Bj0B-88c.js";import{C as K,a as w}from"./CPaginationItem-BqJRYRTb.js";import"./DefaultLayout-BE9qYLzL.js";import"./index.esm-B7prAHhm.js";import"./cil-user-Ddrdy7PS.js";import"./CFormControlWrapper-aXjT4m4y.js";const he=()=>{const[p,I]=r.useState([]),[P,x]=r.useState([]),[L,i]=r.useState(!1),[l,f]=r.useState(""),[C,N]=r.useState(null),[m,S]=r.useState(""),R=r.useRef({}),[d,u]=r.useState(1),h=10,T=[{id:1,name:"Instagram",field:"instagram"}];r.useEffect(()=>{if(l){const s=setTimeout(()=>f(""),3e3);return()=>clearTimeout(s)}},[l]),r.useEffect(()=>{v()},[]),r.useEffect(()=>{const s=a=>{var t;C!==null&&!((t=R.current[C])!=null&&t.contains(a.target))&&N(null)};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[C]),r.useEffect(()=>{if(!m.trim()){x(p);return}const s=m.toLowerCase(),a=p.filter(t=>{var n,o;return((n=t.name)==null?void 0:n.toLowerCase().includes(s))||((o=t.brand_name)==null?void 0:o.toLowerCase().includes(s))});x(a),u(1)},[m,p]);const v=async()=>{var s,a;i(!0);try{const t=await E.get(A);I(t.data.data),x(t.data.data)}catch(t){f(((a=(s=t==null?void 0:t.response)==null?void 0:s.data)==null?void 0:a.message)||t.message||"Something went wrong")}finally{i(!1)}},_=async(s,a)=>{var t,n;i(!0);try{await E.put(`${H}/${s}`,a,{headers:{"Content-Type":"multipart/form-data"}}),await v()}catch(o){f(((n=(t=o==null?void 0:o.response)==null?void 0:t.data)==null?void 0:n.message)||o.message||"Update failed")}finally{i(!1)}},B=(s,a)=>{const t=j.find(y=>y.id===s),n=T.find(y=>y.id===a);if(!t||!n)return;const o=t[n.field]?0:1;_(s,{[n.field]:o})},g=Math.ceil(P.length/h),j=P.slice((d-1)*h,d*h);return L?e.jsx(O,{color:"primary",className:"d-block mx-auto my-5"}):l?e.jsx(M,{color:"danger",children:l}):e.jsx(D,{children:e.jsxs(F,{xs:12,children:[e.jsxs(Q,{className:"mb-4",children:[e.jsxs($,{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Product"})," ",e.jsx("small",{children:"List"})]}),e.jsxs(z,{style:{maxWidth:"250px"},children:[e.jsx(G,{placeholder:"Search name or brand",value:m,onChange:s=>S(s.target.value)}),e.jsx(V,{color:"primary",onClick:()=>S(""),children:"Ã—"})]})]}),e.jsx(U,{children:j.length>0?e.jsxs(W,{hover:!0,children:[e.jsx(q,{children:e.jsxs(k,{children:[e.jsx(c,{scope:"col",children:"Sr. no."}),e.jsx(c,{children:"Name"}),e.jsx(c,{children:"Brand"}),e.jsx(c,{children:"Action"})]})}),e.jsx(J,{children:j.map((s,a)=>e.jsxs(k,{children:[e.jsx(c,{children:(d-1)*h+a+1}),e.jsx(b,{children:(s==null?void 0:s.name)||"-"}),e.jsx(b,{children:(s==null?void 0:s.brand_name)||"-"}),e.jsx(b,{children:e.jsxs("div",{style:{width:134,border:"1px solid #ccc",borderRadius:5,padding:"4px 8px",display:"flex",alignItems:"center",gap:5},children:[e.jsx("input",{type:"checkbox",checked:!!s.instagram,onChange:()=>B(s.id,T[0].id),style:{marginRight:8}}),e.jsx("span",{style:{fontSize:14},children:"Instagram"})]})})]},s.id))})]}):e.jsx("div",{className:"text-center py-4",children:e.jsx("strong",{children:"No products found!"})})})]}),e.jsxs(K,{align:"end",className:"mt-3",children:[e.jsx(w,{disabled:d===1,onClick:()=>u(s=>Math.max(s-1,1)),children:"Previous"}),Array.from({length:g},(s,a)=>e.jsx(w,{active:a+1===d,onClick:()=>u(a+1),children:a+1},a)),e.jsx(w,{disabled:d===g,onClick:()=>u(s=>Math.min(s+1,g)),children:"Next"})]})]})})};export{he as default};
