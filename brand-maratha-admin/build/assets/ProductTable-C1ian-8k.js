import{m as ue,a as o,j as e,C as pe}from"./index-f6D6TMGS.js";import{b as ge,r as je,bl as fe}from"./api.endpoints-D7eIfK11.js";import{a as ee}from"./axios.config-D8NC-S8h.js";import{a as Ce,b as se}from"./index.esm-B7prAHhm.js";import{M as we}from"./Modal-Byr5KNe-.js";import{C as ye}from"./CAlert-Ceafrkex.js";import{C as Se,a as be}from"./CCardBody-DyHbCEEC.js";import{C as ne}from"./CCardHeader-BkEnHaV2.js";import{h as Ne,j as $,k as R,l as ve,m as ke,n as Le}from"./DefaultLayout-BE9qYLzL.js";import{C as Me}from"./CInputGroup-UwF181Kr.js";import{C as Pe}from"./CFormInput-CzlD-ECf.js";import{C as S}from"./CButton-ByJ5g7iZ.js";import{C as ze,a as Ae,b as W,c,d as Te,e as i}from"./CTable-Bj0B-88c.js";import{c as _e}from"./cil-trash-CBbKHhHb.js";import{C as Ie,a as H}from"./CPaginationItem-BqJRYRTb.js";import"./CModalHeader-fVen3JA5.js";import"./CModalTitle-AQ6XSAyd.js";import"./cil-user-Ddrdy7PS.js";import"./CFormControlWrapper-aXjT4m4y.js";const es=()=>{const P=ue(),[j,z]=o.useState(0),[b,te]=o.useState([]),[U,re]=o.useState([]),[A,f]=o.useState(""),[ae,q]=o.useState(null),[le,O]=o.useState(!1),[G,T]=o.useState(""),[d,N]=o.useState(1),[oe,_]=o.useState(!1),v=10,u=o.useMemo(()=>(b==null?void 0:b.data)||[],[b]);o.useEffect(()=>{K()},[]);async function K(){var s,t,r,n;O(!0),T("");try{const{data:a}=await ee.get(ge);te(a)}catch(a){T(((t=(s=a==null?void 0:a.response)==null?void 0:s.data)==null?void 0:t.message)||((n=(r=a==null?void 0:a.response)==null?void 0:r.data)==null?void 0:n.error)||(a==null?void 0:a.message)||"Something went wrong")}finally{O(!1)}}const ce=(s=[])=>{const t=s.map(r=>{var n;return(n=r.name)==null?void 0:n.toLowerCase()});return t.includes("men")&&t.includes("women")?"Unisex":s.length===1?s[0].name:s.length>1?"Multiple":""},Q=async(s=null,t=!1)=>{var r,n,a,p;if(!t){q(s),_(!0);return}try{await ee.delete(`${fe}/${ae}`),K()}catch(l){T(((n=(r=l==null?void 0:l.response)==null?void 0:r.data)==null?void 0:n.message)||((p=(a=l==null?void 0:l.response)==null?void 0:a.data)==null?void 0:p.error)||l.message||"Something went wrong!")}finally{_(!1),q(null)}},ie=o.useCallback((s,t)=>s.filter(r=>{var L,C,M,h,E;const n=t.toLowerCase(),a=(L=r.name)==null?void 0:L.toLowerCase().includes(n),p=(C=r.brand_name)==null?void 0:C.toLowerCase().includes(n),l=(M=r.base_price)==null?void 0:M.toString().includes(n),g=(h=r.sizes)==null?void 0:h.some(x=>{var w,y;const B=(w=x.size)==null?void 0:w.toLowerCase().includes(n),D=(y=x.colors)==null?void 0:y.some(V=>{var Y,J,Z;const me=(Y=V.color)==null?void 0:Y.toLowerCase().includes(n),he=(J=V.skunumber)==null?void 0:J.toLowerCase().includes(n),xe=(Z=V.inventory)==null?void 0:Z.toString().includes(n);return me||he||xe});return B||D}),m=(E=r.collections)==null?void 0:E.some(x=>{var w,y;const B=(w=x.name)==null?void 0:w.toLowerCase().includes(n),D=((y=x.id)==null?void 0:y.toString())===n;return B||D});return a||p||l||g||m})),de=o.useCallback(()=>{if(!(u!=null&&u.length))return[];switch(j){case 1:return u.filter(s=>{var t;return(t=s.sizes)==null?void 0:t.some(r=>{var n;return(n=r.colors)==null?void 0:n.some(a=>a.inventory<3)})});case 2:return u.filter(s=>!Array.isArray(s.sizes)||s.sizes.length===0);default:return u}}),I=o.useMemo(()=>de(),[j,u]);o.useEffect(()=>{const s=A.trim().toLowerCase(),t=s?ie(I,s):I;re(t),N(1)},[A,I]);const F=Math.ceil(U.length/v),k=U.slice((d-1)*v,d*v),X=(k||[]).map(s=>{const t=Array.isArray(s.sizes)&&s.sizes.length>0?s.sizes.map(r=>({...r,colors:Array.isArray(r.colors)&&r.colors.length>0?r.colors:[{color:"-",inventory:null,skunumber:"-",final_mrp:"-"}]})):[{size:"-",colors:[{color:"-",inventory:null,skunumber:"-",final_mrp:"-"}]}];return{...s,sizes:t}});return console.log("Product Variants:",X),le?e.jsx(pe,{color:"primary",className:"d-block mx-auto my-5"}):G?e.jsx(ye,{color:"danger",children:G}):e.jsx(Ce,{children:e.jsxs(Se,{children:[e.jsxs(ne,{className:"d-flex justify-content-between align-items-center",children:[e.jsxs(Ne,{variant:"tabs",children:[e.jsx($,{children:e.jsx(R,{active:j===0,onClick:()=>{z(0),f("")},style:{cursor:"pointer"},children:e.jsx("span",{className:"fw-bold",style:{fontSize:"14px"},children:"CATALOGUE"})})}),e.jsx($,{children:e.jsx(R,{active:j===1,onClick:()=>{z(1),f("")},style:{cursor:"pointer"},children:e.jsx("span",{className:"fw-bold",style:{fontSize:"14px"},children:"LOW INVENTORY"})})}),e.jsx($,{children:e.jsx(R,{active:j===2,onClick:()=>{z(2),f("")},style:{cursor:"pointer"},children:e.jsx("span",{className:"fw-bold",style:{fontSize:"14px"},children:"INCOMPLETE"})})})]}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsxs(Me,{style:{maxWidth:"250px"},children:[e.jsx(Pe,{placeholder:"Search...",value:A,onChange:s=>f(s.target.value),"aria-label":"Search input"}),e.jsx(S,{color:"primary",onClick:()=>f(""),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",fill:"currentColor",viewBox:"0 0 16 16",children:e.jsx("path",{d:`M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 
                                            .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 
                                            2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z`})})})]}),e.jsx(S,{className:"fw-bold",onClick:()=>P("/product/add"),color:"primary",children:"ADD"})]})]}),e.jsx(ve,{className:"mt-3",children:e.jsx(ke,{visible:!0,children:e.jsx(be,{children:(k==null?void 0:k.length)>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{overflowX:"auto",width:"100%"},children:e.jsxs(ze,{hover:!0,style:{tableLayout:"fixed",width:"120rem",textAlign:"center"},children:[e.jsxs(Ae,{children:[e.jsxs(W,{style:{textAlign:"center"},children:[e.jsx(c,{scope:"col",rowSpan:2,className:"text-center align-middle",children:"Sr. No."}),e.jsx(c,{scope:"col",rowSpan:2,className:"text-center align-middle",children:"Thumbnail"}),e.jsx(c,{scope:"col",rowSpan:2,className:"text-center align-middle w-25",children:"Product Name"}),e.jsx(c,{scope:"col",rowSpan:2,width:!0,className:"text-center align-middle",children:"Vertical"}),e.jsx(c,{scope:"col",rowSpan:2,className:"text-center align-middle",children:"Brand"}),e.jsx(c,{scope:"col",colSpan:5,className:"text-center align-middle",children:"Variants"}),e.jsx(c,{scope:"col",rowSpan:2,className:"text-center align-middle",children:"Gender"}),e.jsx(c,{scope:"col",rowSpan:2,className:"text-center align-middle",children:"Action"})]}),e.jsxs(W,{style:{fontSize:"14px"},children:[e.jsx(c,{children:"Size"}),e.jsx(c,{children:"Color"}),e.jsx(c,{children:"SKU ID."}),e.jsx(c,{children:"Inventory"}),e.jsx(c,{children:"MRP"})]})]}),e.jsx(Te,{children:X.map((s,t)=>{var p;const r=((p=s.sizes)==null?void 0:p.map(l=>{var g,m;return{size:l.size,rowSpan:((g=l.colors)==null?void 0:g.length)||1,colors:(m=l.colors)!=null&&m.length?l.colors:[{color:"-",inventory:null,final_mrp:null}]}}))||[],n=r.reduce((l,g)=>l+g.rowSpan,0);let a=0;return e.jsx(o.Fragment,{children:r.map((l,g)=>l.colors.map((m,L)=>{var x;const C=a===0,M=L===0,h={size:l.size,color:m.color,skunumber:m.skunumber,inventory:m.inventory,final_mrp:m.final_mrp};return e.jsxs(W,{children:[C&&e.jsxs(e.Fragment,{children:[e.jsx(i,{rowSpan:n,className:"text-center align-middle",children:(d-1)*v+t+1}),e.jsx(i,{rowSpan:n,className:"text-center align-middle",children:e.jsx("img",{src:je+s.thumbnail_image,width:"60",alt:"thumbnail"})}),e.jsx(i,{rowSpan:n,className:"text-center align-middle",children:(s==null?void 0:s.name)||"-"}),e.jsx(i,{rowSpan:n,className:"text-center align-middle",children:((x=s==null?void 0:s.category)==null?void 0:x.name)||"-"}),e.jsx(i,{rowSpan:n,className:"text-center align-middle",children:(s==null?void 0:s.brand_name)||"-"})]}),M&&e.jsx(i,{rowSpan:l.rowSpan,className:"text-center align-middle",children:h.size||"-"}),e.jsx(i,{className:"text-center align-middle",children:h.color||"-"}),e.jsx(i,{className:"text-center align-middle",children:h.skunumber||"-"}),e.jsx(i,{className:"text-center align-middle",children:h.inventory||"-"}),e.jsx(i,{className:"text-center align-middle",children:h.final_mrp||"-"}),C&&e.jsxs(e.Fragment,{children:[e.jsx(i,{rowSpan:n,className:"text-center align-middle",children:ce(s.catalogues)||"-"}),e.jsx(i,{rowSpan:n,className:"text-center align-middle",children:e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx(S,{color:"warning",onClick:()=>P(`/product-details/${s.id}`),children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18px",height:"auto",fill:"none",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",viewBox:"0 0 24 24",style:{marginBottom:"3px"},children:[e.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]})}),e.jsx(S,{color:"success",onClick:()=>P(`/product/update/${s.id}`),children:e.jsx(se,{icon:Le})}),e.jsx(S,{color:"danger",onClick:()=>Q(s.id),children:e.jsx(se,{icon:_e})})]})})]})]},`${t}-${a++}`)}))},t)})})]})}),e.jsx(we,{visible:oe,onClose:()=>_(!1),onConfirm:()=>Q(null,!0),title:"Confirm Delete",message:"Are you sure you want to delete this product?"}),e.jsxs(Ie,{align:"end",className:"mt-3",children:[e.jsx(H,{disabled:d===1,onClick:()=>N(d-1),style:{cursor:d===1?"default":"pointer"},children:"Previous"}),Array.from({length:F},(s,t)=>e.jsx(H,{active:t+1===d,onClick:()=>N(t+1),style:{cursor:t+1===d?"default":"pointer"},children:t+1},t+1)),e.jsx(H,{disabled:d===F,onClick:()=>N(d+1),style:{cursor:d===F?"default":"pointer"},children:"Next"})]})]}):e.jsx(ne,{className:"d-flex justify-content-center",children:e.jsx("strong",{children:"Products not found!"})})})})})]})})};export{es as default};
