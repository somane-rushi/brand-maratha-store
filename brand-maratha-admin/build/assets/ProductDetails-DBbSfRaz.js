import{a as h,_ as Se,c as ze,b as _e,d as Te,P as H,j as e,m as rs,o as ts,C as ns}from"./index-f6D6TMGS.js";import{a as F}from"./axios.config-D8NC-S8h.js";import{c as ie,b as P,F as re,a as te,f as ye,d as J}from"./formik.esm-DzZc3OM4.js";import{bm as ls,bn as os,bo as cs,r as B,bp as ds,bq as ms,br as hs,bs as xs,bt as ps}from"./api.endpoints-D7eIfK11.js";import{b as be,a as gs}from"./index.esm-B7prAHhm.js";import{C as N,a as m}from"./CRow-C5aZ3uce.js";import{C as M,a as A}from"./CCardBody-DyHbCEEC.js";import{C as I}from"./CCardHeader-BkEnHaV2.js";import{C as Pe,a as js,b as Y,c as D,d as ke,e as T}from"./CTable-Bj0B-88c.js";import{C as O}from"./CButton-ByJ5g7iZ.js";import{n as us,h as fs,j as ne,k as Ce,l as ys,m as Ne,o as U}from"./DefaultLayout-BE9qYLzL.js";import{c as bs}from"./cil-trash-CBbKHhHb.js";import{M as ve}from"./Modal-Byr5KNe-.js";import{s as le,D as oe,a as we}from"./data-TWB-jpMp.js";import{C as ce}from"./CAlert-Ceafrkex.js";import{C as de}from"./CForm-BElthXFv.js";import{C}from"./CFormControlWrapper-aXjT4m4y.js";import{C as V}from"./CFormSelect-BM6fWH_8.js";import{C as _}from"./CFormInput-CzlD-ECf.js";import"./cil-user-Ddrdy7PS.js";import"./CModalHeader-fVen3JA5.js";import"./CModalTitle-AQ6XSAyd.js";var W=h.forwardRef(function(g,z){var o=g.children,k=g.as,E=k===void 0?"p":k,x=g.className,w=Se(g,["children","as","className"]);return ze.createElement(E,_e({className:Te("card-text",x)},w,{ref:z}),o)});W.propTypes={as:H.elementType,children:H.node,className:H.string};W.displayName="CCardText";var Q=h.forwardRef(function(g,z){var o=g.children,k=g.as,E=k===void 0?"h5":k,x=g.className,w=Se(g,["children","as","className"]);return ze.createElement(E,_e({className:Te("card-title",x)},w,{ref:z}),o)});Q.propTypes={as:H.elementType,children:H.node,className:H.string};Q.displayName="CCardTitle";const Cs=({colors:g,handleUpdate:z,handleDelete:o})=>{var k,E;return e.jsx(N,{className:"mt-4",children:e.jsx(m,{xs:12,children:e.jsxs(M,{className:"mb-4",children:[e.jsxs(I,{children:[e.jsx("strong",{children:"colors"})," ",e.jsx("small",{children:"List"})]}),e.jsx(A,{children:((k=g==null?void 0:g.data)==null?void 0:k.length)>0?e.jsxs(Pe,{hover:!0,children:[e.jsx(js,{children:e.jsxs(Y,{children:[e.jsx(D,{scope:"col",children:"Sr.No"}),e.jsx(D,{scope:"col",children:"Color Name"}),e.jsx(D,{scope:"col",children:"Color"}),e.jsx(D,{scope:"col",children:"Size"}),e.jsx(D,{scope:"col",children:"Price"}),e.jsx(D,{scope:"col",children:"Inventory"}),e.jsx(D,{scope:"col",children:"Action"})]})}),e.jsx(ke,{children:(E=g==null?void 0:g.data)==null?void 0:E.map((x,w)=>e.jsx(h.Fragment,{children:e.jsxs(Y,{children:[e.jsx(D,{scope:"row",children:w+1}),e.jsx(T,{children:x==null?void 0:x.color}),e.jsx(T,{children:e.jsx("div",{style:{backgroundColor:x==null?void 0:x.color_code,borderRadius:"50px",width:"30px",height:"30px",border:"1px solid"}})}),e.jsx(T,{children:x==null?void 0:x.size}),e.jsx(T,{children:x==null?void 0:x.final_mrp}),e.jsx(T,{children:x==null?void 0:x.stock}),e.jsxs(T,{className:"d-flex gap-2",children:[e.jsx(O,{color:"success",onClick:()=>z(x),children:e.jsx(be,{icon:us})}),e.jsx(O,{color:"danger",onClick:()=>o(x==null?void 0:x.id),children:e.jsx(be,{icon:bs})})]})]})},w))})]}):e.jsx(I,{children:e.jsx("strong",{children:"No colors found!"})})})]})})})},Ys=()=>{const g=rs(),{id:z}=ts(),[o,k]=h.useState(null),[E,x]=h.useState(!1),[w,me]=h.useState(0),[he,Re]=h.useState(""),[Me,Ae]=h.useState([]),[j,Ie]=h.useState([]),[Oe,Ee]=h.useState([]),[Z,Fe]=h.useState(null),[q,S]=h.useState({message:"",sizeMessage:"",colorMessage:""}),[De,xe]=h.useState(!0),[c,qe]=h.useState({}),[Le,X]=h.useState(!1),[$e,pe]=h.useState(null),[Ge,ee]=h.useState(!1),[He,ge]=h.useState(null),[$,K]=h.useState({video:"",images:[]}),[Be,Ue]=h.useState(!1),[Ns,vs]=h.useState(!1),R=h.useRef(null),Ye=ie().shape({size:P().required("Size is required")});h.useEffect(()=>{const s=le.map(i=>Object.keys(i)[0]);console.log("Types:",s)},[]);const Ze=()=>ie().shape({size_id:P().required("Size is required"),color:P().required("Color name is required").test("no-whitespace","Color name cannot be only spaces",s=>s&&s.trim().length>0).matches(/^[A-Za-z\s]+$/,"Color name can only contain letters and spaces"),color_code:P().matches(/^#([0-9A-F]{3}){1,2}$/i,"Invalid color code").required("Color code is required"),stock:J().typeError("Stock must be a number").required("Stock is required").positive("Stock must be a positive number").integer("Stock must be an integer"),mrp:J().typeError("MRP must be a number").required("MRP is required").min(0,"MRP must be 0 or a positive number").integer("MRP must be an integer"),hsn:P().required("HSN Code is required"),gst:P().required("GST is required"),images:ye().of(te().test("fileType","Only JPG, JPEG, and PNG formats are allowed",s=>s instanceof File?["image/jpg","image/jpeg","image/png"].includes(s.type):!0).test("fileSize","Each file must be less than 12MB",s=>s instanceof File?s.size<=12*1024*1024:!0)).min(3,"You must select at least 3 images").max(6,"You can upload up to 6 images only"),video:te().nullable().test("fileType","Only MP4, MOV, AVI formats are allowed",s=>s?["video/mp4","video/quicktime","video/x-msvideo"].includes(s.type):!0).test("fileSize","File exceeds 20MB limit",s=>s?s.size<=20*1024*1024:!0)}),Ke=()=>ie().shape({size_id:P().required("Size is required"),color:P().required("Color name is required").test("no-whitespace","Color name cannot be only spaces",s=>s&&s.trim().length>0).matches(/^[A-Za-z\s]+$/,"Color name can only contain letters and spaces"),color_code:P().matches(/^#([0-9A-F]{3}){1,2}$/i,"Invalid color code").required("Color code is required"),stock:J().typeError("Stock must be a number").required("Stock is required").positive("Stock must be a positive number").integer("Stock must be an integer"),mrp:J().typeError("MRP must be a number").required("MRP is required").min(0,"MRP must be 0 or a positive number").integer("MRP must be an integer"),hsn:P().required("HSN Code is required"),gst:P().required("GST is required"),images:ye().nullable().test("min-images","You must select at least 3 images",function(s){return((s==null?void 0:s.filter(a=>a&&(typeof a=="string"||a instanceof File)).length)||0)>=3}).test("max-images","You can upload a maximum of 6 images",function(s){return((s==null?void 0:s.filter(a=>a&&(typeof a=="string"||a instanceof File)).length)||0)<=6}).test("file-type","Only JPG, JPEG, and PNG formats are allowed",function(s){return!s||s.length===0?!0:s.every(i=>!i||typeof i=="string"?!0:["image/jpg","image/jpeg","image/png"].includes(i.type))}).test("file-size","Each image must be less than 12MB",function(s){return!s||s.length===0?!0:s.every(i=>!i||typeof i=="string"?!0:i.size<=12*1024*1024)}),video:te().nullable().test("is-valid-video","Only MP4, MOV, AVI formats are allowed",s=>!s||typeof s=="string"?!0:["video/mp4","video/quicktime","video/x-msvideo"].includes(s.type)).test("videoSize","Video must be less than 20MB",s=>!s||typeof s=="string"?!0:s.size<=20*1024*1024)});h.useEffect(()=>{const s=[];return Object.keys(q).forEach(i=>{if(q[i]){const a=setTimeout(()=>{S(r=>({...r,[i]:""}))},2e3);s.push(a)}}),()=>s.forEach(i=>clearTimeout(i))},[q]),h.useEffect(()=>{w===0&&(ae(),L())},[w]),h.useEffect(()=>{se()},[z]),h.useEffect(()=>{console.log("sizes",j)},[j]);const Je=s=>{const i=parseInt(s.substring(1,3),16),a=parseInt(s.substring(3,5),16),r=parseInt(s.substring(5,7),16);return(i*299+a*587+r*114)/1e3>125?"#000":"#fff"},se=async()=>{x(!0),S(s=>({...s,message:""}));try{const{data:s}=await F.get(`${ls}/${z}`);k(s)}catch(s){S(i=>{var a,r,d,l;return{...i,message:((r=(a=s==null?void 0:s.response)==null?void 0:a.data)==null?void 0:r.message)||((l=(d=s==null?void 0:s.response)==null?void 0:d.data)==null?void 0:l.err)||s.message||"Something went wrong!"}})}finally{x(!1)}},ae=async()=>{try{const s=await F.get(`${os}/${z}/sizes`);Ie(s.data)}catch(s){console.error("Error fetching sizes:",s)}},L=async()=>{try{const s=await F.get(`${cs}/${z}/colors`);Ee(s.data)}catch(s){console.error("Error fetching sizes:",s)}},Ve=async(s,{resetForm:i})=>{const{size:a}=s;try{const r={size:a,product_id:Number(z)};await F.post(ds,r),S(d=>({...d,sizeMessage:"Size added successfully!"})),await ae(),await se()}catch(r){S(d=>{var l,n,t,p;return{...d,sizeMessage:((n=(l=r==null?void 0:r.response)==null?void 0:l.data)==null?void 0:n.message)||((p=(t=r==null?void 0:r.response)==null?void 0:t.data)==null?void 0:p.err)||r.message||"Something went wrong!"}})}finally{i()}},We=async s=>{const{id:i,size_id:a,color:r,product_id:d,size:l,stock:n,color_code:t,gst:p,hsn:u,mrp:f,image1:v,image2:y,image3:b,image4:G,image5:je,image6:ue,video:fe}=s;(v||y||b||G||je||ue||fe)&&K({images:[v,y,b,G,je,ue].filter(Boolean),video:fe}),qe({id:i,size_id:a,color:r,product_id:d,size:l,stock:n,color_code:t,gst:p,hsn:u,mrp:f}),xe(!1)},Qe=async(s,{resetForm:i})=>{try{const a=new FormData;a.append("color",s.color.trim()),a.append("color_code",s.color_code),a.append("stock",Number(s.stock)),a.append("product_id",Number(z)),a.append("size_id",Number(s.size_id)),a.append("mrp",Number(s.mrp)),a.append("hsn",s.hsn),a.append("gst",Number(s.gst)),Array.isArray(s.images)&&s.images.forEach((r,d)=>{r instanceof File&&d<5&&a.append(`image${d+1}`,r)}),s.video instanceof File&&a.append("video",s.video),await F.post(hs,a,{headers:{"Content-Type":"multipart/form-data"}}),S(r=>({...r,colorMessage:"Color added successfully!"})),await L(),await se()}catch(a){console.log("Color add error",a),S(r=>{var d,l,n,t;return{...r,colorMessage:((l=(d=a==null?void 0:a.response)==null?void 0:d.data)==null?void 0:l.message)||((t=(n=a==null?void 0:a.response)==null?void 0:n.data)==null?void 0:t.error)||a.message||"Something went wrong!"}})}},Xe=async(s,{resetForm:i})=>{if(console.log("Values",s),!(c!=null&&c.id)){setMessage("Please select a color first.");return}try{const a=new FormData;a.append("product_id",c.product_id),a.append("color",s.color.trim()),a.append("color_code",s.color_code),a.append("size_id",s.size_id),a.append("stock",s.stock),a.append("mrp",s.mrp),a.append("hsn",s.hsn),a.append("gst",s.gst),s.images.filter(t=>typeof t!="string").forEach((t,p)=>{a.append(`image${p+1}`,t)});const d=s.images.filter(t=>typeof t=="string"),l=["image1","image2","image3","image4","image5","image6"];d.forEach((t,p)=>{l[p]&&a.append(`old_${l[p]}`,t)}),typeof s.video!="string"&&s.video?a.append("video",s.video):typeof s.video=="string"&&a.append("old_video",s.video),(await F.put(`${xs}/${c.id}`,a,{headers:{"Content-Type":"multipart/form-data"}})).data.success===!0&&(xe(!0),S(t=>({...t,colorMessage:"Color updated successfully!"}))),await L()}catch(a){S(r=>{var d,l,n,t;return{...r,colorMessage:((l=(d=a==null?void 0:a.response)==null?void 0:d.data)==null?void 0:l.message)||((t=(n=a==null?void 0:a.response)==null?void 0:n.data)==null?void 0:t.err)||a.message||"Something went wrong!"}})}finally{i()}},es=async s=>{pe(s),X(!0)};async function ss(){try{await F.delete(`${ms}/${$e}`),ae(),L(),S(s=>({...s,sizeMessage:"Size deleted successfully!"}))}catch(s){S(i=>{var a,r,d,l;return{...i,sizeMessage:((r=(a=s==null?void 0:s.response)==null?void 0:a.data)==null?void 0:r.message)||((l=(d=s==null?void 0:s.response)==null?void 0:d.data)==null?void 0:l.err)||s.message||"Something went wrong!"}})}finally{X(!1),pe(null)}}const as=async s=>{ge(s),ee(!0)};async function is(){try{await F.delete(`${ps}/${He}`),L(),S(s=>({...s,colorMessage:"Color deleted successfully!"}))}catch(s){S(i=>{var a,r,d,l;return{...i,colorMessage:((r=(a=s==null?void 0:s.response)==null?void 0:a.data)==null?void 0:r.message)||((l=(d=s==null?void 0:s.response)==null?void 0:d.data)==null?void 0:l.err)||s.message||"Something went wrong!"}})}finally{ee(!1),ge(null)}}return E?e.jsx(ns,{color:"primary",className:"d-block mx-auto my-5"}):o?e.jsxs(gs,{className:"mt-4",children:[e.jsxs(fs,{variant:"tabs",className:"align-items-center mb-3 px-1",children:[e.jsx(ne,{className:"me-3",children:e.jsxs(O,{color:"secondary",variant:"outline",className:"d-flex align-items-center gap-2 px-3",onClick:()=>g(-1),children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",viewBox:"0 0 24 24",children:e.jsx("polyline",{points:"15 18 9 12 15 6"})}),"Back"]})}),e.jsx(ne,{children:e.jsx(Ce,{active:w===0,onClick:()=>me(0),style:{cursor:"pointer"},className:"fw-bold",children:"SIZES"})}),e.jsx(ne,{children:e.jsx(Ce,{active:w===1,onClick:()=>me(1),style:{cursor:"pointer"},className:"fw-bold",children:"DETAILS"})})]}),e.jsxs(ys,{className:"mt-3",children:[e.jsxs(Ne,{visible:w===0,children:[e.jsxs(M,{children:[e.jsx(I,{children:e.jsx("strong",{children:"SIZE - COLOUR VARIANT(S)"})}),e.jsxs(A,{children:[e.jsx(re,{enableReinitialize:!0,initialValues:{size:""},validationSchema:Ye,onSubmit:Ve,children:({values:s,errors:i,touched:a,setFieldValue:r,handleSubmit:d})=>e.jsx(de,{onSubmit:d,children:e.jsxs(N,{children:[e.jsx(m,{xs:4,children:e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"form-label fw-bold",children:"SIZE TYPE"}),e.jsxs("select",{className:"form-select",value:he,onChange:l=>{const n=l.target.value;Re(n);const t=le.find(u=>Object.keys(u)[0]===n),p=t?t[n]:[];Ae(p),r("size","")},children:[e.jsx("option",{value:"",children:"Select type..."}),le.map((l,n)=>{const t=Object.keys(l)[0];return e.jsx("option",{value:t,children:t.charAt(0).toUpperCase()+t.slice(1)},n)})]})]})}),he&&e.jsxs(e.Fragment,{children:[e.jsx(m,{xs:4,children:e.jsx(oe,{label:"Sizes",name:"size",placeholder:"Sizes...",options:Me,value:s.size,setFieldValue:r,error:i.size,touched:a.size})}),e.jsx(m,{style:{marginTop:"2.0rem"},children:e.jsx(O,{type:"submit",color:"primary",children:"Add"})})]})]})})}),e.jsx("div",{className:"d-flex flex-wrap gap-2",children:Array.isArray(j.data)&&j.data.map(s=>e.jsxs(U,{color:"secondary",className:"d-flex align-items-center px-3 py-2 rounded-pill",style:{fontSize:"14px",cursor:"pointer",backgroundColor:"#f0f0f0",color:"#333"},children:[s.size,e.jsx("svg",{onClick:()=>es(s.id),xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",className:"ms-2",viewBox:"0 0 16 16",style:{cursor:"pointer"},children:e.jsx("path",{d:"M4.646 4.646a.5.5 0 011 .708L5.707 6l1.147 1.146a.5.5 0 01-.708.708L5 6.707 3.854 7.854a.5.5 0 01-.708-.708L4.293 6 3.146 4.854a.5.5 0 11.708-.708L5 5.293l1.146-1.147a.5.5 0 11.708.708L5.707 6l1.147 1.146a.5.5 0 11-.708.708L5 6.707l-1.146 1.147a.5.5 0 11-.708-.708L4.293 6l-1.147-1.146a.5.5 0 11.708-.708L5 5.293 6.146 4.146a.5.5 0 01.708.708L5.707 6l1.147 1.146a.5.5 0 11-.708.708L5 6.707l-1.146 1.147a.5.5 0 01-.708-.708L4.293 6l-1.147-1.146a.5.5 0 11.708-.708L5 5.293z"})})]},s.id))}),q.sizeMessage&&e.jsx(ce,{className:"mt-4",children:q.sizeMessage}),e.jsx(ve,{visible:Le,onClose:()=>X(!1),onConfirm:ss,title:"Confirm Delete",message:"Are you sure you want to delete this size?"})]})]}),e.jsx(N,{children:e.jsxs(m,{xs:12,children:[De?e.jsx(re,{enableReinitialize:!0,initialValues:{size_id:"",color:"",color_code:"#000000",stock:"",mrp:"",hsn:"",gst:"",images:[],imagePreviews:[],video:""},validationSchema:Ze,onSubmit:Qe,children:({values:s,errors:i,touched:a,handleChange:r,handleSubmit:d,setFieldValue:l})=>e.jsxs(de,{onSubmit:d,children:[e.jsxs(M,{className:"mt-4",children:[e.jsx(I,{children:e.jsx("strong",{children:"PRODUCT COLOUR VARIANT  "})}),e.jsxs(A,{children:[e.jsxs(N,{className:" align-items-center",children:[e.jsxs(m,{md:5,children:[e.jsxs(C,{htmlFor:"size_id",className:"fw-semibold",children:["SIZE",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs(V,{name:"size_id",value:s.size_id,onChange:n=>{r(n),L(n.target.value)},children:[e.jsx("option",{value:"",children:"Select Size"}),Array.isArray(j.data)&&j.data.map(n=>e.jsx("option",{value:n.id,children:n.size},n.id))]}),i.size_id&&a.size_id&&e.jsx("div",{className:"text-danger small",style:{fontSize:"14px"},children:i.size_id})]}),e.jsx(m,{md:5,children:e.jsx(oe,{label:"Colors",name:"color",placeholder:"color...",options:we,value:s.color,setFieldValue:l,error:i.color,touched:a.color,className:"mb-0"})}),e.jsxs(m,{md:2,children:[e.jsxs(C,{htmlFor:"color_code",className:"fw-semibold",children:["COLOR PICKER",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(_,{style:{width:"100%"},type:"color",name:"color_code",value:s.color_code,onChange:n=>l("color_code",n.target.value)})]})]}),e.jsx(N,{children:e.jsxs(m,{md:6,className:"mt-4",children:[e.jsxs(C,{htmlFor:"color_code",className:"fw-semibold",children:["STOCK",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(_,{style:{width:"83%"},type:"number",name:"stock",placeholder:"Stock",value:s.stock,onChange:r}),i.stock&&a.stock&&e.jsx("div",{className:"text-danger small",style:{fontSize:"14px"},children:i.stock})]})})]})]}),e.jsxs(M,{className:"mt-4",children:[e.jsx(I,{children:e.jsx("strong",{children:"PRODUCT PRICING"})}),e.jsx(A,{children:e.jsxs(N,{children:[e.jsxs(m,{md:4,children:[e.jsxs(C,{htmlFor:"mrp",className:"fw-semibold",children:["PRODUCT MRP",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(_,{type:"number",name:"mrp",placeholder:"MRP",value:s.mrp,onChange:r}),i.mrp&&a.mrp&&e.jsx("div",{className:"text-danger small",style:{fontSize:"14px"},children:i.mrp})]}),e.jsxs(m,{md:4,children:[e.jsxs(C,{htmlFor:"hsn",className:"fw-semibold",children:["HSN CODE",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(_,{type:"text",name:"hsn",placeholder:"hsn",value:s.hsn,onChange:r}),i.hsn&&a.hsn&&e.jsx("div",{className:"text-danger small",style:{fontSize:"14px"},children:i.hsn})]}),e.jsxs(m,{md:4,children:[e.jsxs(C,{htmlFor:"gst",className:"fw-semibold",children:["GST",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs(V,{name:"gst",value:s.gst,onChange:r,children:[e.jsx("option",{value:"",children:"Select gst"}),e.jsx("option",{value:"0",children:"0%"}),e.jsx("option",{value:"5",children:"5%"}),e.jsx("option",{value:"12",children:"12%"}),e.jsx("option",{value:"18",children:"18%"}),e.jsx("option",{value:"28",children:"28%"})]}),i.gst&&a.gst&&e.jsx("div",{className:"text-danger small",style:{fontSize:"14px"},children:i.gst})]})]})})]}),e.jsxs(M,{className:"mt-4",children:[e.jsx(I,{children:e.jsx("strong",{children:"PRODUCT IMAGES"})}),e.jsx(A,{children:e.jsxs(N,{children:[e.jsxs(m,{md:6,children:[e.jsxs(C,{htmlFor:"images",className:"fw-semibold",children:["PRODUCT IMAGE",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(_,{type:"file",name:"images",multiple:!0,ref:R,onChange:n=>{const t=Array.from(n.target.files),u=[...s.images||[],...t],f=[...s.imagePreviews||[],...t.map(y=>URL.createObjectURL(y))];l("images",u),l("imagePreviews",f);const v=new DataTransfer;u.forEach(y=>v.items.add(y)),R.current&&(R.current.files=v.files)}}),e.jsxs("p",{style:{color:"gray",fontSize:"14px"},children:["Hold ",e.jsx("b",{children:"Ctrl (Cmd on Mac)"})," while selecting files to upload multiple images."]}),i.images&&a.images&&e.jsx("div",{className:"text-danger small",children:i.images}),e.jsx(N,{children:Array.isArray(s.imagePreviews)&&s.imagePreviews.map((n,t)=>{const p=typeof s.images[t]!="string";return e.jsxs(m,{md:3,className:"mb-2",style:{position:"relative"},children:[e.jsx("img",{src:n,alt:`Preview ${t+1}`,className:"img-thumbnail",style:{width:"100px",height:"100px",objectFit:"cover",padding:0}}),p&&e.jsx(O,{type:"button",color:"danger",size:"sm",style:{position:"absolute",top:"5px",right:"5px",borderRadius:"50%",padding:"0px 6px",fontSize:"14px",lineHeight:"18px",color:"white"},onClick:()=>{const u=s.imagePreviews.filter((y,b)=>b!==t),f=s.images.filter((y,b)=>b!==t);l("imagePreviews",u),l("images",f);const v=new DataTransfer;f.forEach(y=>{typeof y!="string"&&v.items.add(y)}),R.current&&(R.current.files=v.files)},children:"×"})]},t)})})]}),e.jsxs(m,{md:6,children:[e.jsx(C,{htmlFor:"video",className:"fw-semibold",children:"VIDEO"}),e.jsx(_,{placeholder:"Test",type:"file",name:"video",onChange:n=>l("video",n.target.files[0])}),i.video&&a.video&&e.jsx("div",{className:"text-danger small",children:i.video})]})]})})]}),e.jsx(N,{className:"mt-4",children:e.jsx(m,{children:e.jsx(O,{type:"submit",color:"primary",children:"Add Color"})})})]})}):e.jsx(re,{enableReinitialize:!0,initialValues:{size_id:(c==null?void 0:c.size_id)||"",color:(c==null?void 0:c.color)||"",color_code:(c==null?void 0:c.color_code)||"",stock:(c==null?void 0:c.stock)||"",mrp:(c==null?void 0:c.mrp)||"",hsn:(c==null?void 0:c.hsn)||"",gst:(c==null?void 0:c.gst)||"",images:Array.isArray(c==null?void 0:c.images)?c.images:[],video:(c==null?void 0:c.video)||null},validationSchema:Ke,onSubmit:Xe,children:({values:s,errors:i,touched:a,handleChange:r,handleSubmit:d,setFieldValue:l})=>e.jsxs(de,{onSubmit:d,children:[e.jsxs(M,{className:"mt-4",children:[e.jsx(I,{children:e.jsx("strong",{children:"PRODUCT COLOUR VARIANT"})}),e.jsxs(A,{children:[e.jsxs(N,{className:"mb-3 align-items-center",children:[e.jsxs(m,{md:5,children:[e.jsxs(C,{htmlFor:"size_id",children:["Size",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs(V,{name:"size_id",value:s.size_id,onChange:n=>{r(n),L(n.target.value)},children:[e.jsx("option",{value:"",children:"Select Size"}),Array.isArray(j.data)&&j.data.map(n=>e.jsx("option",{value:n.id,children:n.size},n.id))]}),i.size_id&&a.size_id&&e.jsx("div",{className:"text-danger small",style:{fontSize:"14px"},children:i.size_id})]}),e.jsx(m,{md:5,children:e.jsx(oe,{label:"Colors",name:"color",placeholder:"color...",options:we,value:s.color,setFieldValue:l,error:i.color,touched:a.color})}),e.jsxs(m,{md:2,children:[e.jsxs(C,{htmlFor:"color_code",className:"fw-semibold",children:["COLOR PICKER",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(_,{style:{width:"100%"},type:"color",name:"color_code",value:s.color_code,onChange:n=>l("color_code",n.target.value)})]})]}),e.jsx(N,{children:e.jsxs(m,{md:6,children:[e.jsxs(C,{htmlFor:"color_code",className:"fw-semibold",children:["STOCK",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(_,{type:"number",name:"stock",placeholder:"Stock",value:s.stock,onChange:r}),i.stock&&a.stock&&e.jsx("div",{className:"text-danger small",style:{fontSize:"14px"},children:i.stock})]})})]})]}),e.jsxs(M,{className:"mt-4",children:[e.jsx(I,{children:e.jsx("strong",{children:"PRODUCT PRICING"})}),e.jsx(A,{children:e.jsxs(N,{children:[e.jsxs(m,{md:4,children:[e.jsxs(C,{htmlFor:"mrp",className:"fw-semibold",children:["PRODUCT MRP",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(_,{type:"number",name:"mrp",placeholder:"MRP",value:s.mrp,onChange:r}),i.mrp&&a.mrp&&e.jsx("div",{className:"text-danger small",style:{fontSize:"14px"},children:i.mrp})]}),e.jsxs(m,{md:4,children:[e.jsxs(C,{htmlFor:"hsn",className:"fw-semibold",children:["HSN CODE",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(_,{type:"text",name:"hsn",placeholder:"hsn",value:s.hsn,onChange:r}),i.hsn&&a.hsn&&e.jsx("div",{className:"text-danger small",style:{fontSize:"14px"},children:i.hsn})]}),e.jsxs(m,{md:4,children:[e.jsxs(C,{htmlFor:"gst",className:"fw-semibold",children:["GST",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs(V,{name:"gst",value:s.gst,onChange:r,children:[e.jsx("option",{value:"",children:"Select gst"}),e.jsx("option",{value:"0",children:"0%"}),e.jsx("option",{value:"5",children:"5%"}),e.jsx("option",{value:"12",children:"12%"}),e.jsx("option",{value:"18",children:"18%"}),e.jsx("option",{value:"28",children:"28%"})]}),i.gst&&a.gst&&e.jsx("div",{className:"text-danger small",style:{fontSize:"14px"},children:i.gst})]})]})})]}),e.jsxs(M,{className:"mt-4",children:[e.jsx(I,{className:"fs-5",children:e.jsx("strong",{children:"PRODUCT IMAGES"})}),e.jsx(A,{className:"d-flex flex-column row-gap-4",children:e.jsxs(N,{children:[e.jsxs(m,{md:4,children:[e.jsxs(C,{className:"fw-semibold",children:["PRODUCT IMAGE",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(_,{type:"file",name:"images",multiple:!0,ref:R,onChange:n=>{var y;const t=Array.from(n.target.files);if(t.length===0)return;const p=(y=s.images)==null?void 0:y.some(b=>typeof b=="string");let u=[],f=[];p||!s.images||s.images.length===0?(u=[...t],f=t.map(b=>URL.createObjectURL(b))):(u=[...s.images.filter(G=>G instanceof File),...t],f=[...$.images,...t.map(G=>URL.createObjectURL(G))]),l("images",u),K(b=>({...b,images:f})),Ue(!0);const v=new DataTransfer;u.forEach(b=>{b instanceof File&&v.items.add(b)}),R.current&&(R.current.files=v.files)}}),e.jsxs("p",{style:{color:"gray",fontSize:"14px"},children:["Hold ",e.jsx("b",{children:"Ctrl (Cmd on Mac)"})," while selecting files to upload multiple images."]}),i.images&&a.images&&e.jsx("div",{className:"text-danger smalls",children:i.images}),e.jsx(N,{className:"mt-3",children:$.images.map((n,t)=>e.jsxs(m,{md:3,className:"mb-2",style:{position:"relative"},children:[e.jsx("img",{src:n.startsWith("blob:")?n:B+n,alt:`Preview ${t+1}`,className:"img-thumbnail",style:{width:"100px",height:"100px",objectFit:"cover",padding:0}}),Be&&e.jsx(O,{type:"button",color:"danger",size:"sm",style:{position:"absolute",top:"5px",right:"5px",borderRadius:"50%",padding:"0px 6px",fontSize:"14px",lineHeight:"18px",color:"white"},onClick:()=>{const p=s.images.filter((f,v)=>v!==t);l("images",p),K(f=>({...f,images:f.images.filter((v,y)=>y!==t)}));const u=new DataTransfer;p.forEach(f=>u.items.add(f)),R.current&&(R.current.files=u.files)},children:"×"})]},t))})]}),e.jsxs(m,{md:4,children:[e.jsx(C,{className:"fw-semibold",children:"VIDEO"}),e.jsx(_,{placeholder:"Test",type:"file",name:"video",onChange:n=>{const t=n.target.files[0];t&&(l("video",t),K(p=>({...p,video:URL.createObjectURL(t)})))}}),i.video&&a.video&&e.jsx("div",{className:"text-danger smalls",children:i.video}),$.video&&e.jsx("div",{className:"mt-2",children:e.jsx("video",{src:$.video.startsWith("blob:")?$.video:B+$.video,width:200,controls:!0,style:{borderRadius:"5px"}})})]})]})})]}),e.jsx(N,{className:"mt-4",children:e.jsx(m,{children:e.jsx(O,{type:"submit",color:"primary",children:"Update Color"})})})]})}),q.colorMessage&&e.jsx(ce,{className:"mt-4",children:q.colorMessage}),e.jsx(Cs,{colors:Oe,handleUpdate:We,handleDelete:as}),e.jsx(ve,{visible:Ge,onClose:()=>ee(!1),onConfirm:is,title:"Confirm Delete",message:"Are you sure you want to delete this color?"})]})})]}),e.jsx(Ne,{visible:w===1,children:e.jsxs(N,{className:"justify-content-center",children:[e.jsx(m,{md:4,children:e.jsx(M,{className:"shadow-lg p-3",children:e.jsxs(A,{className:"text-center",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("strong",{children:"Thumbnail Image"}),e.jsx("div",{className:"border rounded shadow-sm p-2",children:e.jsx("img",{src:B+o.thumbnail_image,alt:"Product Thumbnail",className:"img-fluid rounded"})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("strong",{children:"Product Images"}),e.jsx("div",{className:"border rounded shadow-sm",children:e.jsx("div",{className:"container",children:Array.from({length:Math.ceil(5/2)},(s,i)=>e.jsx("div",{className:"row g-1 mb-1",children:[o==null?void 0:o.image1,o==null?void 0:o.image2,o==null?void 0:o.image3,o==null?void 0:o.image4,o==null?void 0:o.image5,o==null?void 0:o.image6].slice(i*2,i*2+2).map((a,r)=>a&&e.jsx("div",{className:"col-6",children:e.jsx("img",{src:B+a,alt:"Product",className:"img-fluid rounded"})},r))},i))})})]}),o.video&&e.jsxs("div",{children:[e.jsx("strong",{children:"Product Video"}),e.jsx("div",{className:"border rounded shadow-sm p-2",children:e.jsxs("video",{controls:!0,className:"w-100 rounded",style:{maxHeight:"250px"},children:[e.jsx("source",{src:B+o.video,type:"video/mp4"}),"Your browser does not support the video tag."]})})]})]})})}),e.jsx(m,{md:6,children:e.jsx(M,{className:"shadow-lg p-4",children:e.jsxs(A,{children:[e.jsx(Q,{className:"h3 fw-bold text-primary",children:o.name}),e.jsx(Q,{className:"text-muted",children:o.slug}),e.jsx(U,{color:"info",className:"mb-3",children:o.subname}),e.jsxs(W,{children:[e.jsx("strong",{children:"Description:"})," ",o.description]}),e.jsxs(W,{children:[e.jsx("strong",{children:"Return Policy:"})," ",o.return_policy]}),e.jsx(Pe,{striped:!0,responsive:!0,className:"mt-3",children:e.jsxs(ke,{children:[e.jsxs(Y,{children:[e.jsx(T,{children:e.jsx("strong",{children:"Price"})}),e.jsxs(T,{className:"text-success fw-bold",children:["$",o.base_price]})]}),e.jsxs(Y,{children:[e.jsx(T,{children:e.jsx("strong",{children:"Bestseller"})}),e.jsx(T,{children:o.isbestseller?"Yes":"No"})]}),e.jsxs(Y,{children:[e.jsx(T,{children:e.jsx("strong",{children:"New Arrival"})}),e.jsx(T,{children:o.new_arrivals?"Yes":"No"})]})]})}),e.jsxs("div",{className:"mt-4",children:[e.jsx("strong",{children:"Sizes:"}),e.jsx("div",{className:"d-flex flex-wrap",children:Array.isArray(j==null?void 0:j.data)&&j.data.length>0?j.data.map(s=>e.jsx(O,{color:Z===s.id?"primary":"secondary",variant:Z===s.id?"":"outline",className:"me-2 mb-2",onClick:()=>Fe(s.id),children:s.size},s.id)):e.jsx(U,{color:"warning",children:"No Sizes Available"})})]}),Z&&e.jsxs("div",{className:"mt-4",children:[e.jsx("strong",{children:"Available Colors:"}),e.jsx("div",{className:"d-flex flex-wrap",children:Array.isArray(j==null?void 0:j.data)&&j.data.length>0?(()=>{var i;const s=j.data.find(a=>a.id===Z);return((i=s==null?void 0:s.colors)==null?void 0:i.length)>0?s.colors.map(a=>e.jsxs("div",{className:"me-2 mb-2 px-3 py-1 rounded shadow-sm",style:{backgroundColor:a.color_code,color:Je(a.color_code),border:"1px solid #ddd",opacity:a.out_of_stock?.5:1,cursor:"pointer"},children:[a.color," (",a.stock,")"]},a.id)):e.jsx(U,{color:"warning",children:"No Colors Available"})})():e.jsx(U,{color:"danger",children:"No Sizes Available"})})]})]})})})]})})]})]}):e.jsx(ce,{color:"warning",children:"No product found."})};export{Ys as default};
