import{a as r,j as t}from"./index-f6D6TMGS.js";import{ax as B,ay as P,az as S,aA as v,aB as A,aC as R}from"./api.endpoints-D7eIfK11.js";import{E as b}from"./Editer-DlJNIPt6.js";import{a as g}from"./axios.config-D8NC-S8h.js";import{h as f}from"./errorHelper-EbapN-iz.js";import{C as N,a as y}from"./CRow-C5aZ3uce.js";import{C as D,a as H}from"./CCardBody-DyHbCEEC.js";import{C as I}from"./CCardHeader-BkEnHaV2.js";import{C as M}from"./CFormSelect-BM6fWH_8.js";import{C}from"./CAlert-Ceafrkex.js";import"./index-BvccmHzl.js";import"./CButton-ByJ5g7iZ.js";import"./index.esm-B7prAHhm.js";import"./CFormControlWrapper-aXjT4m4y.js";import"./DefaultLayout-BE9qYLzL.js";import"./cil-user-Ddrdy7PS.js";const Y=()=>{const[m,o]=r.useState(""),[n,j]=r.useState("english"),[_,u]=r.useState(null),[i,c]=r.useState(""),[l,p]=r.useState(""),[h,E]=r.useState(null);r.useEffect(()=>{E({getBanner:n==="english"?A:R,postBanner:n==="english"?S:v,putBanner:n==="english"?B:P})},[n]),r.useEffect(()=>{if(i||l){const a=setTimeout(()=>{c(""),p("")},3e3);return()=>clearTimeout(a)}},[i,l]);const w=async()=>{var a;try{let s;const e=await x();if(Array.isArray(e)&&e.length>0){const d=(a=e[0])==null?void 0:a.id;s=await g.put(`${h.putBanner}/${d}`,{content:m}),c("Record updated successfully!")}else s=await g.post(h.postBanner,{content:m}),c("Record created successfully!");u(s.data[0]),o("")}catch(s){p(f(s))}},x=async()=>{var a,s;try{const e=await g.get(h.getBanner);if(e.status===200)return u(e.data[0]),o(((a=e.data[0])==null?void 0:a.content)||""),c(e.data.length===0?"Policy does not exist":(s=e==null?void 0:e.data)==null?void 0:s.message),e.data}catch(e){const d=f(e);return p(d),{error:d}}};return t.jsx(N,{children:t.jsx(y,{xs:12,children:t.jsxs(D,{className:"mb-4",children:[t.jsx(I,{children:t.jsx("strong",{children:"Editer"})}),t.jsxs(H,{children:[t.jsx(y,{xs:12,md:4,lg:2,className:"mb-4",children:t.jsxs(M,{xs:4,"aria-label":"Default select example",defaultValue:"english",onChange:a=>{j(a.target.value),o(""),u(null)},children:[t.jsx("option",{value:"english",children:"English"}),t.jsx("option",{value:"marathi",children:"मराठी"})]})}),t.jsxs("div",{className:"mt-4",children:[i&&t.jsx(C,{color:"success",children:i}),l&&t.jsx(C,{color:"danger",children:l})]}),t.jsx(b,{policy:m,handlePolicy:w,viewPolicyHandler:x,viewPolicy:_,message:i,setPolicy:o})]})]})})})};export{Y as default};
